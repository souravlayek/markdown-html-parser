"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseMarkdownToHTML=void 0;class MarkdownParser{constructor(e){this.markdown=e,this.codeBlockPlaceholders=[]}parse(){let e=this.protectCodeBlocks(this.markdown);return e=this.parseHeadings(e),e=this.parseBlockquotes(e),e=this.parseLists(e),e=this.parseBold(e),e=this.parseItalic(e),e=this.parseImages(e),e=this.parseLinks(e),e=this.parseInlineCode(e),e=this.parseParagraphs(e),e=this.restoreCodeBlocks(e),e}protectCodeBlocks(e){return e.replace(/```(\w+)?\s*([\s\S]*?)```/g,((e,r,s)=>{const o=r?` class="language-${r}"`:"",a=`\x3c!--codeblock${this.codeBlockPlaceholders.length}--\x3e`;return this.codeBlockPlaceholders.push(`<pre><code${o}>${s}</code></pre>`),a}))}restoreCodeBlocks(e){return this.codeBlockPlaceholders.forEach(((r,s)=>{const o=`\x3c!--codeblock${s}--\x3e`;e=e.replace(o,r)})),e}parseHeadings(e){return e.replace(/^(#{1,6})\s*(.+)$/gm,((e,r,s)=>{const o=r.length;return`<h${o}>${s}</h${o}>`}))}parseBold(e){return e.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>")}parseItalic(e){return e.replace(/(\*|_)(.+?)\1/g,"<em>$2</em>")}parseLinks(e){return e.replace(/\[(.+?)\]\((.+?)\)/g,'<a href="$2">$1</a>')}parseImages(e){return e.replace(/!\[(.*?)\]\((.+?)\)/g,'<img src="$2" alt="$1">')}parseInlineCode(e){return e.replace(/`(.+?)`/g,"<code>$1</code>")}parseParagraphs(e){return e.replace(/^(?!<.*>)(.+)$/gm,"<p>$1</p>")}parseBlockquotes(e){return e.replace(/^>\s*(.+)$/gm,"<blockquote>$1</blockquote>")}parseLists(e){return e=(e=(e=e.replace(/^(\s*)- (.+)$/gm,((e,r,s)=>{const o=r.length/2;return`<ul>${" ".repeat(2*o)}<li>${s}</li></ul>`}))).replace(/^(\s*)\d+\. (.+)$/gm,((e,r,s)=>{const o=r.length/2;return`<ol>${" ".repeat(2*o)}<li>${s}</li></ol>`}))).replace(/<\/(ul|ol)>\s*<\1>/g,"")}}function parseMarkdownToHTML(e){return new MarkdownParser(e).parse()}exports.default=MarkdownParser,exports.parseMarkdownToHTML=parseMarkdownToHTML;